In this week's episode, we'll be taking a look at how to implement a tab-based application in a single JavaScript context in Titanium Mobile.  Throughout our reference guides and official training course, we generally advocate the use of a single JavaScript context in your Titanium applications.  

However, in our most popular demo application, the Titanium Mobile Kitchen Sink, a tab-based application is developed using multiple contexts by associating each window opened with a URL to a JavaScript file.  While this approach is technically valid, it presents the developer with difficulties around sharing data between windows, confusion around when code for a window has been executed, possible object reference issues which can lead to memory leaks, and reloading of JavaScript code in every window for shared libraries.  

For those reasons, unless you have a specific need for a "clean slate" in every window, using multiple JavaScript contexts cannot be considered a best practice approach to structuring a Titanium Mobile application.

In this example application, we are going to explore how to structure a tab based application in a single JavaScript context. We'll avoid the problems around multiple contexts entirely, while retaining the code organization benefits of having a single JavaScript file associated with a window.

Our demo application its self is not terribly exciting - we've basically refactored the default application generated by Titanium Studio and added a button to each window.  In a tabbed application in Titanium Mobile, each tab has a stack of windows associated with it.  Rather than opening the window directly, you call the open function on a tab, passing a window to it, which pushes a new window onto the stack associated with the tab.  When the window is closed, either programmatically or via the back button, the window is popped from the stack associated with the tab, and you are returned to the previous window for the tab.

This is all easy to do in a single context application, but one thing you'll notice right away is the lack of certain magic variables which are set for you in a multiple context application, such as Ti.UI.currentTabGroup, Ti.UI.currentTab, and Ti.UI.currentWindow.  While these are nice to have, it's actually very easy to mimic these global variables in a single context.  Let's take a look at how that works.